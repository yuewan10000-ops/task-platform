# ç°åœ¨è¯¥æ€ä¹ˆåš - å®Œæ•´æ“ä½œæŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

- [x] Git å·²å®‰è£…
- [x] æœ¬åœ° Git ä»“åº“å·²åˆå§‹åŒ–
- [x] ä»£ç å·²æäº¤ï¼ˆ2 ä¸ªæäº¤ï¼Œ162 ä¸ªæ–‡ä»¶ï¼‰
- [x] è¿œç¨‹ä»“åº“å·²è¿æ¥ï¼š`https://github.com/yuewan10000-ops/task-platform.git`
- [x] åˆ†æ”¯å·²é‡å‘½åä¸º `main`

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### ç¬¬ä¸€æ­¥ï¼šæ¨é€ä»£ç åˆ° GitHub

ç”±äºç½‘ç»œé—®é¢˜ï¼Œæ¨é€å¤±è´¥ã€‚è¯·é€‰æ‹©ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

---

#### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ GitHub Desktopï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰

1. **ä¸‹è½½ GitHub Desktop**
   - è®¿é—®ï¼šhttps://desktop.github.com/
   - ä¸‹è½½å¹¶å®‰è£…

2. **æ‰“å¼€ GitHub Desktop**
   - ç™»å½•ä½ çš„ GitHub è´¦å·ï¼ˆyuewan10000-opsï¼‰

3. **æ·»åŠ æœ¬åœ°ä»“åº“**
   - ç‚¹å‡»èœå•ï¼šFile â†’ Add Local Repository
   - é€‰æ‹©æ–‡ä»¶å¤¹ï¼š`C:\Users\admin\Desktop\task-platform`
   - ç‚¹å‡» "Add repository"

4. **æ¨é€ä»£ç **
   - ç‚¹å‡»å³ä¸Šè§’çš„ "Publish repository" æŒ‰é’®
   - ç¡®è®¤ä»“åº“åï¼š`yuewan10000-ops/task-platform`
   - ç‚¹å‡» "Publish repository"
   - ç­‰å¾…æ¨é€å®Œæˆ

**ä¼˜ç‚¹ï¼š** å›¾å½¢ç•Œé¢ï¼Œæ“ä½œç®€å•ï¼Œè‡ªåŠ¨å¤„ç†è®¤è¯

---

#### æ–¹æ¡ˆ Bï¼šé…ç½®ä»£ç†åæ¨é€ï¼ˆå¦‚æœä½ æœ‰ä»£ç†ï¼‰

å¦‚æœä½ æœ‰å¯ç”¨çš„ä»£ç†ï¼ˆå¦‚ Clashã€V2Ray ç­‰ï¼‰ï¼Œå¯ä»¥é…ç½® Git ä½¿ç”¨ä»£ç†ï¼š

```bash
# 1. è®¾ç½®ä»£ç†ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»£ç†åœ°å€å’Œç«¯å£ï¼‰
git config --global http.proxy http://127.0.0.1:7890
git config --global https.proxy http://127.0.0.1:7890

# 2. æ¨é€ä»£ç 
git push -u origin main

# 3. æ¨é€å®Œæˆåï¼Œå–æ¶ˆä»£ç†è®¾ç½®
git config --global --unset http.proxy
git config --global --unset https.proxy
```

**å¸¸è§ä»£ç†ç«¯å£ï¼š**
- Clash: 7890
- V2Ray: 10808
- Shadowsocks: 1080

---

#### æ–¹æ¡ˆ Cï¼šä½¿ç”¨ Giteeï¼ˆå›½å†…è®¿é—®æ›´å¿«ï¼‰

å¦‚æœ GitHub è®¿é—®å›°éš¾ï¼Œå¯ä»¥ä½¿ç”¨ Giteeï¼ˆç äº‘ï¼‰ï¼š

1. **æ³¨å†Œ/ç™»å½• Gitee**
   - è®¿é—®ï¼šhttps://gitee.com
   - å¦‚æœæ²¡æœ‰è´¦å·ï¼Œå…ˆæ³¨å†Œ

2. **åˆ›å»ºä»“åº“**
   - è®¿é—®ï¼šhttps://gitee.com/projects/new
   - ä»“åº“åç§°ï¼š`task-platform`
   - é€‰æ‹©ï¼šå…¬å¼€
   - ä¸è¦åˆå§‹åŒ– README
   - ç‚¹å‡»åˆ›å»º

3. **ä¿®æ”¹è¿œç¨‹åœ°å€å¹¶æ¨é€**
   ```bash
   # ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€
   git remote set-url origin https://gitee.com/ä½ çš„ç”¨æˆ·å/task-platform.git
   
   # æ¨é€ä»£ç 
   git push -u origin main
   ```

---

### ç¬¬äºŒæ­¥ï¼šéªŒè¯æ¨é€æˆåŠŸ

æ¨é€æˆåŠŸåï¼Œè®¿é—®ä»¥ä¸‹ URL åº”è¯¥èƒ½çœ‹åˆ°ä½ çš„ä»£ç ï¼š

**GitHubï¼š** https://github.com/yuewan10000-ops/task-platform  
**Giteeï¼š** https://gitee.com/ä½ çš„ç”¨æˆ·å/task-platform

ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- æ‰€æœ‰é¡¹ç›®æ–‡ä»¶
- æäº¤å†å²ï¼ˆ2 ä¸ªæäº¤ï¼‰
- é¡¹ç›®ç»“æ„

---

### ç¬¬ä¸‰æ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šå…‹éš†å¹¶éƒ¨ç½²

æ¨é€æˆåŠŸåï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

#### 1. SSH ç™»å½•æœåŠ¡å™¨

```bash
ssh root@64.176.83.204
```

#### 2. å…‹éš†ä»“åº“

**å¦‚æœä½¿ç”¨ GitHubï¼š**
```bash
cd /opt
git clone https://github.com/yuewan10000-ops/task-platform.git
cd task-platform
```

**å¦‚æœä½¿ç”¨ Giteeï¼š**
```bash
cd /opt
git clone https://gitee.com/ä½ çš„ç”¨æˆ·å/task-platform.git
cd task-platform
```

#### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend/a-portal
npm install
cd ../b-portal
npm install
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# è¿›å…¥åç«¯ç›®å½•
cd /opt/task-platform/backend

# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env
```

**éœ€è¦é…ç½®çš„å†…å®¹ï¼š**
```env
DATABASE_URL="mysql://task_user:ä½ çš„å¯†ç @localhost:3306/task_db"
JWT_SECRET="ä½ çš„JWTå¯†é’¥ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼‰"
ADMIN_ACCOUNT="admin"
ADMIN_LOGIN_PASSWORD="ä½ çš„ç®¡ç†å‘˜ç™»å½•å¯†ç "
ADMIN_PAY_PASSWORD="ä½ çš„ç®¡ç†å‘˜æ”¯ä»˜å¯†ç "
```

ä¿å­˜å¹¶é€€å‡ºï¼ˆCtrl+Xï¼Œç„¶å Yï¼Œç„¶å Enterï¼‰

#### 5. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd /opt/task-platform/backend
npx prisma generate
npx prisma migrate deploy
```

#### 6. æ„å»ºé¡¹ç›®

```bash
# æ„å»ºåç«¯
cd /opt/task-platform/backend
npm run build

# æ„å»ºå‰ç«¯ A-portal
cd /opt/task-platform/frontend/a-portal
npm run build

# æ„å»ºå‰ç«¯ B-portal
cd /opt/task-platform/frontend/b-portal
npm run build
```

#### 7. å¯åŠ¨æœåŠ¡

```bash
# å®‰è£… PM2ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install -g pm2

# å¯åŠ¨åç«¯æœåŠ¡
cd /opt/task-platform/backend
pm2 start dist/server.js --name task-platform-api

# ä¿å­˜ PM2 é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
```

#### 8. é…ç½® Nginxï¼ˆå¦‚æœè¿˜æ²¡é…ç½®ï¼‰

å‚è€ƒä¹‹å‰çš„ Nginx é…ç½®ï¼Œç¡®ä¿ï¼š
- å‰ç«¯æ–‡ä»¶æŒ‡å‘ `frontend/*/dist` ç›®å½•
- API è¯·æ±‚ä»£ç†åˆ° `http://localhost:3000`

---

## ğŸ“‹ æ“ä½œæ£€æŸ¥æ¸…å•

### æœ¬åœ°æ“ä½œ
- [ ] é€‰æ‹©æ¨é€æ–¹æ¡ˆï¼ˆA/B/Cï¼‰
- [ ] æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“
- [ ] éªŒè¯ä»£ç å·²æˆåŠŸä¸Šä¼ 

### æœåŠ¡å™¨æ“ä½œ
- [ ] SSH ç™»å½•æœåŠ¡å™¨
- [ ] å…‹éš†ä»“åº“
- [ ] å®‰è£…ä¾èµ–ï¼ˆåç«¯ + å‰ç«¯ï¼‰
- [ ] é…ç½® `.env` æ–‡ä»¶
- [ ] è¿è¡Œæ•°æ®åº“è¿ç§»
- [ ] æ„å»ºé¡¹ç›®ï¼ˆåç«¯ + å‰ç«¯ï¼‰
- [ ] å¯åŠ¨ PM2 æœåŠ¡
- [ ] é…ç½® Nginx
- [ ] æµ‹è¯•è®¿é—®

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### æ¨é€å¤±è´¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å°è¯•ä½¿ç”¨ GitHub Desktop
- æˆ–ä½¿ç”¨ Gitee

### æœåŠ¡å™¨å…‹éš†å¤±è´¥
- æ£€æŸ¥æœåŠ¡å™¨ç½‘ç»œè¿æ¥
- ç¡®è®¤ä»“åº“ URL æ­£ç¡®
- å¦‚æœæ˜¯ç§æœ‰ä»“åº“ï¼Œéœ€è¦é…ç½®è®¤è¯

### æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦è¿è¡Œï¼š`systemctl status mysql`
- æ£€æŸ¥ `.env` ä¸­çš„ `DATABASE_URL` æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

### æ„å»ºå¤±è´¥
- æ£€æŸ¥ Node.js ç‰ˆæœ¬ï¼š`node --version`ï¼ˆéœ€è¦ 18+ï¼‰
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œæ•´å®‰è£…
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

---

## ğŸ’¡ æ¨èæµç¨‹

1. **ç°åœ¨ï¼š** ä½¿ç”¨ GitHub Desktop æ¨é€ä»£ç ï¼ˆæœ€ç®€å•ï¼‰
2. **æ¨é€æˆåŠŸåï¼š** åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†ä»“åº“
3. **ç„¶åï¼š** æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤å®Œæˆéƒ¨ç½²

---

## ä¸‹ä¸€æ­¥

**è¯·å…ˆå®Œæˆç¬¬ä¸€æ­¥ï¼ˆæ¨é€ä»£ç ï¼‰ï¼Œç„¶åå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šç»§ç»­æŒ‡å¯¼ä½ åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼**

ä½ æƒ³ä½¿ç”¨å“ªä¸ªæ–¹æ¡ˆæ¨é€ä»£ç ï¼Ÿ
- æ–¹æ¡ˆ Aï¼šGitHub Desktopï¼ˆæ¨èï¼‰
- æ–¹æ¡ˆ Bï¼šé…ç½®ä»£ç†
- æ–¹æ¡ˆ Cï¼šä½¿ç”¨ Gitee

